<div id="page3-wrapper">
    <style>
        #page3-wrapper {
            font-family: 'Arial', sans-serif;
            background-color: #2c3e50;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            width: 100%;
        }

        #page3-wrapper .container {
            background: #34495e;
            padding: 20px;
            box-shadow: none;
            text-align: center;
            width: 100%;
            max-width: none;
            min-height: 100vh;
            border: none;
        }

        #page3-wrapper h2 {
            margin-top: 0;
            color: #ecf0f1;
            font-size: 1.5em;
        }

        /* Custom Input Styling */
        #page3-wrapper .input-group {
            margin: 20px 0;
            background: #2c3e50;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #465c71;
        }

        #page3-wrapper label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.9em;
            color: #bdc3c7;
        }

        #page3-wrapper input[type="number"] {
            width: 80%;
            padding: 12px;
            font-size: 18px;
            text-align: center;
            border-radius: 8px;
            border: 2px solid #f1c40f;
            background-color: #fff;
            color: #333;
            outline: none;
        }

        /* Result Grid */
        #page3-wrapper .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        #page3-wrapper .card {
            background: #2c3e50;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #465c71;
        }

        #page3-wrapper .card-title {
            font-size: 0.8em;
            color: #bdc3c7;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        #page3-wrapper .card-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        /* Colors */
        #page3-wrapper .txt-green {
            color: #2ecc71;
        }

        #page3-wrapper .txt-red {
            color: #e74c3c;
        }

        #page3-wrapper #calcBtn {
            width: 100%;
            padding: 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
        }

        #page3-wrapper #calcBtn:hover {
            background: #2980b9;
        }

        /* Confirmation Box */
        #page3-wrapper .confirmation-box {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        #page3-wrapper .high-match {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid #2ecc71;
        }

        #page3-wrapper .low-match {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid #e74c3c;
        }
    </style>

    <div class="container">
        <h2>⚔️ Dual-Core + Custom</h2>
        <div class="input-group">
            <label>Add Custom Number (Offset)</label>
            <input type="number" id="customInput" placeholder="0" value="0">
        </div>
        <button id="calcBtn">ANALYZE NOW</button>
        <div id="resultsArea" style="display:none;">
            <div class="grid-container">
                <div class="card">
                    <div class="card-title">Number Formula</div>
                    <div id="numResult" class="card-value">-</div>
                    <div id="numSize" style="font-size:0.9em;">...</div>
                </div>
                <div class="card">
                    <div class="card-title">Size Formula</div>
                    <div id="sizeResult" class="card-value" style="font-size:1.8em; line-height: 1.4em;">-</div>
                </div>
            </div>
            <div id="signalBox" class="confirmation-box">
                <strong id="signalTitle" style="display:block; font-size:1.2em; margin-bottom:5px;"></strong>
                <span id="signalDesc" style="font-size:0.9em;"></span>
            </div>
        </div>
    </div>

    <script>
        (function () {
            const btn = document.getElementById('calcBtn');

            function handleCalc() {
                const customInput = document.getElementById('customInput');
                const resultsArea = document.getElementById('resultsArea');
                const numResultDisplay = document.getElementById('numResult');
                const numSizeDisplay = document.getElementById('numSize');
                const sizeResultDisplay = document.getElementById('sizeResult');
                const signalBox = document.getElementById('signalBox');
                const signalTitle = document.getElementById('signalTitle');
                const signalDesc = document.getElementById('signalDesc');

                if (!customInput || !resultsArea) return;

                // 1. Get Time Data
                const now = new Date();
                const minute = now.getMinutes();
                const hour = now.getHours();
                const M = minute % 10;
                const H = hour % 10;

                // 2. Get Custom Input (Default to 0 if empty)
                let adjustment = parseInt(customInput.value);
                if (isNaN(adjustment)) adjustment = 0;

                // --- STRATEGY 1: EXACT NUMBER (The Lag + Adjustment) ---
                // Formula: (Minute - 1) + Adjustment
                let rawNum = (M - 1) + adjustment;
                // Handle negative wrapping (e.g., -1 becomes 9)
                let predNum = ((rawNum % 10) + 10) % 10;

                // Determine if that number is Big or Small
                let predNumIsBig = (predNum >= 5);
                let predNumSizeText = predNumIsBig ? "BIG" : "SMALL";
                let predNumColor = predNumIsBig ? "txt-red" : "txt-green";

                // --- STRATEGY 2: SIZE ONLY (Golden Cross + 2 + Adjustment) ---
                // Formula: (Minute + Hour + 2) + Adjustment
                let sum = M + H + 2 + adjustment;
                let finalDigit = ((sum % 10) + 10) % 10; // Secure Modulo

                let strategyIsBig = (finalDigit >= 5);
                let strategySizeText = strategyIsBig ? "BIG" : "SMALL";
                let strategyColor = strategyIsBig ? "txt-red" : "txt-green";

                // 3. Display Results
                resultsArea.style.display = "block";

                // Update Box 1
                numResultDisplay.innerText = predNum;
                numResultDisplay.className = "card-value " + predNumColor;
                numSizeDisplay.innerText = "(" + predNumSizeText + ")";

                // Update Box 2
                sizeResultDisplay.innerText = strategySizeText;
                sizeResultDisplay.className = "card-value " + strategyColor;

                // 4. Calculate Signal Strength
                signalBox.style.display = "block";
                if (predNumSizeText === strategySizeText) {
                    // MATCH!
                    signalBox.className = "confirmation-box high-match";
                    signalTitle.innerText = "✅ STRONG SIGNAL";
                    signalTitle.style.color = "#2ecc71";
                    signalDesc.innerText = `Both formulas (with your +${adjustment} add) agree on ${strategySizeText}.`;
                } else {
                    // MISMATCH
                    signalBox.className = "confirmation-box low-match";
                    signalTitle.innerText = "⚠️ CONFLICT";
                    signalTitle.style.color = "#e74c3c";
                    signalDesc.innerText = `Number suggests ${predNumSizeText}, but Size Formula suggests ${strategySizeText}.`;
                }
            };

            if (btn) {
                btn.addEventListener('click', handleCalc);
            }
        })();
    </script>
</div>